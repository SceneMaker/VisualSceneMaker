
?- consult("res/swi/*.pl").
    true.
    true.

?- add(F, V, I, O, C).
    C = 1, F = _5, V = _6, I = _7, O = '[|]'(':'(_5, _6), _7).
    C = 1, O = '[|]'(':'(F, V), I).

?- add(f1:f2:f3, v, [f1:[f2:[]], a:b, f1:[f2:[]]], [f1:[f2:[f3:v]], a:b, f1:[f2:[f3:v]]], C).
    C = 2.
    C = 2.

?- add(f1:f2:f3, v, [f1:[f2:[]], a:b, f1:[f2:[]]], O, C).
    C = 2, O = '[|]'(':'(f1, '[|]'(':'(f2, '[|]'(':'(f3, v), '[]')), '[]')), '[|]'(':'(a, b), '[|]'(':'(f1, '[|]'(':'(f2, '[|]'(':'(f3, v), '[]')), '[]')), '[]'))).
    C = 2, O = '[|]'(':'(f1, '[|]'(':'(f2, '[|]'(':'(f3, v), '[]')), '[]')), '[|]'(':'(a, b), '[|]'(':'(f1, '[|]'(':'(f2, '[|]'(':'(f3, v), '[]')), '[]')), '[]'))).

?- add(f1:f2:f3, V, I, [f1:[f2:[f3:v]], a:b, f1:[f2:[f3:v]]], C).
    C = 2, V = v, I = '[|]'(':'(f1, '[|]'(':'(f2, '[]'), '[]')), '[|]'(':'(a, b), '[|]'(':'(f1, '[|]'(':'(f2, '[]'), '[]')), '[]'))).
    C = 2, V = v, I = '[|]'(':'(f1, '[|]'(':'(f2, '[]'), '[]')), '[|]'(':'(a, b), '[|]'(':'(f1, '[|]'(':'(f2, '[]'), '[]')), '[]'))).

?- add(x:y, z, I, [x:[y:z], a:b], C).
    C = 1, I = '[|]'(':'(x, '[]'), '[|]'(':'(a, b), '[]')).
    C = 1, I = '[|]'(':'(x, '[]'), '[|]'(':'(a, b), '[]')).

?- add(F, V:[1, 2, 3], I, O, C).
    false.
    false.

?- add(F, [1, 2, 3], [], O, C).
    C = 1, F = _24, O = '[|]'(':'(_24, '[|]'(1, '[|]'(2, '[|]'(3, '[]')))), '[]').
    C = 1, O = '[|]'(':'(F, '[|]'(1, '[|]'(2, '[|]'(3, '[]')))), '[]').

?- add(P, V, I, O, C).
    P = _30, C = 1, V = _31, I = _32, O = '[|]'(':'(_30, _31), _32).
    C = 1, O = '[|]'(':'(P, V), I).

?- add(P, V, I, [a:b], C).
    P = a, C = 1, V = b, I = '[]'.
    P = a, C = 1, V = b, I = '[]'.

?- add(P, V, I, [X:Y], C).
    P = _43, C = 1, V = _44, X = _43, I = '[]', Y = _44.
    P = X, C = 1, V = Y, I = '[]'.

?- add(x:y, z, I, [x:[y:z]], C).
    C = 1, I = '[|]'(':'(x, '[]'), '[]').
    C = 1, I = '[|]'(':'(x, '[]'), '[]').

?- add(x:y, z, [x:[]], [x:[y:z]], 1).
    true.
    true.

?- add(X:Y, Z, [X:[]], [X:[Y:Z]], C).
    C = 1, X = _51, Y = _52, Z = _53.
    C = 1.

?- add(F:Q, V, I, [X:[Y:Z]], C).
    Q = _63, C = 1, F = _62, V = _64, X = _62, I = '[|]'(':'(_62, '[]'), '[]'), Y = _63, Z = _64.
    Q = Y, C = 1, F = X, V = Z, I = '[|]'(':'(X, '[]'), '[]').

?- add(F, V, I, [X:[Y:Z]], C). 
    C = 1, F = _72, V = '[|]'(':'(_73, _74), '[]'), X = _72, I = '[]', Y = _73, Z = _74.
    C = 1, F = X, V = '[|]'(':'(Y, Z), '[]'), I = '[]'.

?- add(P, V, I, [a:b], C).
    P = a, C = 1, V = b, I = '[]'.
    P = a, C = 1, V = b, I = '[]'.

?- add(P, V, I, [X:Y], C).
    P = _85, C = 1, V = _86, X = _85, I = '[]', Y = _86.
    P = X, C = 1, V = Y, I = '[]'.

?- add(x:y, z, I, [x:[y:z]], C).
    C = 1, I = '[|]'(':'(x, '[]'), '[]').
    C = 1, I = '[|]'(':'(x, '[]'), '[]').

?- add(x:y, z, [x:[]], [x:[y:z]], 1).
    true.
    true.

?- add(X:Y, Z, [X:[]], [X:[Y:Z]], C).
    C = 1, X = _93, Y = _94, Z = _95.
    C = 1.

?- add(F:Q, V, I, [X:[Y:Z]], C).
    Q = _105, C = 1, F = _104, V = _106, X = _104, I = '[|]'(':'(_104, '[]'), '[]'), Y = _105, Z = _106.
    Q = Y, C = 1, F = X, V = Z, I = '[|]'(':'(X, '[]'), '[]').

?- add(F, V, I, [X:[Y:Z]], C).
    C = 1, F = _114, V = '[|]'(':'(_115, _116), '[]'), X = _114, I = '[]', Y = _115, Z = _116.
    C = 1, F = X, V = '[|]'(':'(Y, Z), '[]'), I = '[]'.

?- add(P, V, [], O, C).
    P = _121, C = 1, V = _122, O = '[|]'(':'(_121, _122), '[]').
    C = 1, O = '[|]'(':'(P, V), '[]').

?- add(P, V, [], [Q:V], C).
    P = _127, Q = _127, C = 1, V = _128.
    P = Q, C = 1.

?- add(P, V, [], [a:b], C).
    P = a, C = 1, V = b.
    P = a, C = 1, V = b.

?- \+add(P, V, [a:b], [a:b, x:y], C).
    false.
    false.

?- add(P, V, [x:y], [a:b, x:y], C).
    P = a, C = 1, V = b.
    P = a, C = 1, V = b.

?- add(P, V, I, [a:b, x:y], C).
    P = a, C = 1, V = b, I = '[|]'(':'(x, y), '[]').
    P = a, C = 1, V = b, I = '[|]'(':'(x, y), '[]').

?- \+add(x, y, I, [a:b, x:y], C).
    false.
    false.

?- add(F:Q, [1, 2, 3], I, O, C).
    Q = _150, C = 1, F = _149, I = '[|]'(':'(_149, _151), '[]'), O = '[|]'(':'(_149, '[|]'(':'(_150, '[|]'(1, '[|]'(2, '[|]'(3, '[]')))), _151)), '[]').